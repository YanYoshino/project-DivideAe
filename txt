// 1 - Guardar valores que o usuário digitar
// 2 - enviar valores para o backend

import { redirect } from 'next/navigation';
import { useState } from 'react';

import { axios } from '@axios';

export default function Home() {
  const [name, setName] = useState();
  const [email, setEmail] = useState(); // gustavo2@gmail.com
  const [password, setPassword] = useState(); // 123456
  const [messageError, setMessageError] = useState();
  const [messageSuccess, setMessageSuccess] = useState();
  const [response, SetResponse] = useState();

  const handleLogin = () => {
    axios
      .post('https://nike.com/user', {
        email,
        password,
        name,
      })
      .then((response) => {
        console.log(response);
        setMessageSuccess('Login realizado com sucesso');
        redirect('/cursos');
      })
      .catch((error) => {
        console.log(error);
        setMessageError('Email ou senha inválidos');
      });
  };


  // {
  //   data": {
  //     // titulo: "Ola mundo",
  //     // descricao: "video top"
  //   },  

  useEffect(() => {
    axios.get("https://nike.com/videos")
    .then((response) => {
      console.log(response);
      setResponse(response);
      console.log(response)
    })
    .catch((error) => {
      console.log(error);
      setMessageSuccess('Erro ao buscar vídeos');
    })
  }, [])

  return (
    <div className="flex flex-col">
      <h1>Login</h1>
      <input type="text" placeholder="Nome" onChange={(e) => setName(e.target.value)} />
      <input type="text" placeholder="Email" onChange={(e) => setEmail(e.target.value)} />
      <input type="password" placeholder="Senha" onChange={(e) => setPassword(e.target.value)} />
      <p>{messageError}</p>
      <p>{messageSuccess}</p>

      <p>{response.data.titulo}</p>
      <button onClick={handleLogin}>Entrar</button>
    </div>
  );
}